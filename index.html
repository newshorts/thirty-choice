<!-- 
    Author: Mike Newell Â© 2012
-->
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title>GSP 30th Anniversary</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="css/reset.css" />
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <style>
            
        </style>
    </head>
    <body>
        <header></header>
        <div id="wrap">
            <div class="videos">
                <div class="videoContainer">
                    <div class="video">
                        <img class="videoThumb" src="images/thumbs/2.jpg" />
                        <img class="videoTile" src="images/1.jpg" />
                    </div>
                </div>
                <div class="videoContainer">
                    <div class="video">
                        <img class="videoThumb" src="images/thumbs/1.jpg" />
                        <img class="videoTile" src="images/2.jpg" />
                    </div>
                </div>
                <div class="videoContainer">
                    <div class="video">
                        <img class="videoThumb" src="images/thumbs/1.jpg" />
                        <img class="videoTile" src="images/3.jpg" />
                    </div>
                </div>
                <div class="clear"></div>
            </div>
            <ul class="choices">
                <li class="choice">
                    <div class="choiceDrop"></div>
                    <span>1.</span>
                    <div class="choiceTitle"></div>
                </li>
                <li class="choice">
                    <div class="choiceDrop"></div>
                    <span>2.</span>
                    <div class="choiceTitle"></div>
                </li>
                <li class="choice">
                    <div class="choiceDrop"></div>
                    <span>3.</span>
                    <div class="choiceTitle"></div>
                </li>
                <li class="choice">
                    <div class="choiceDrop"></div>
                    <span>4.</span>
                    <div class="choiceTitle"></div>
                </li>
                <li class="choice">
                    <div class="choiceDrop"></div>
                    <span>5.</span>
                    <div class="choiceTitle"></div>
                </li>
            </ul>
            <div class="clear"></div>
        </div>
        <footer></footer>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
        <script src="js/jquery.validate.js"></script>
        <script>
            (function($) {
                $(window).load(function() {
                    
                    // events
                    $('.video').on('dragstart', function(evt, ui) {
                        
                        var $this = $(this);
                        
                        if(!ui.helper.data('dropped')) {
                            
                            var $parent = $this.parent('.videoContainer');

                            $parent.addClass('empty');

                            var tile = $this.find('.videoTile'),
                                thumb = $this.find('.videoThumb');
                                
                            tile.css({
                                width: '60px',
                                height: '60px',
//                                top: evt.offsetY - 30 + 'px',
//                                left: evt.offsetX - 30 + 'px',
                                opacity: 0
                            });

                            thumb.css({
                                width: '60px',
                                height: '60px',
//                                top: evt.offsetY - 30 + 'px',
//                                left: evt.offsetX - 30 + 'px',
                                opacity: 1
                            });
                            
                            // it looks like you can't control initial positioning
//                            console.dir(evt)
                            
                            $this.css({
                                width: '60px',
                                height: '60px',
                            });
//                            $this.css({
//                                width: '60px',
//                                height: '60px',
////                                top: '300px',
////                                left: '300px'
//                            });
                        }
                    });
                    
                    $('.video').on('dragstop', function(evt, ui) {
                        
                        var $this = $(this);
                        
                        if(!ui.helper.data('dropped')) {
                            
                            var $parent = $this.parent('.videoContainer');

                            $parent.removeClass('empty');

                            var tile = $this.find('.videoTile'),
                                thumb = $this.find('.videoThumb');
                                
                            tile.css({
                                width: '160px',
                                height: '160px',
//                                top: '0px',
//                                left: '0px',
                                opacity: 1
                            });

                            thumb.css({
                                width: '160px',
                                height: '160px',
//                                top: '0px',
//                                left: '0px',
                                opacity: 0
                            });
                            
                            $this.css({
                                width: '160px',
                                height: '160px'
                            });
                        }
                    });
                    
                    // TODO figure out how to resize the element when you start dragging
//                    function position(evt, ui) {
//                        console.dir(ui.helper.data('uiDraggable').positionAbs)
//                        
//                        
//                        ui.helper.data('uiDraggable').positionAbs.left = 300;
//                        
////                        $( this ).position({
////                            my: 'right top',
////                            at: 'bottom left',
////                            of: evt.pageX
////                        });
////                        $(this).data('draggable').offset().click.top -=x
//                    }
                    
                    
                    // set elements in ui
                    $('.video').draggable({
                        revert: function(evt, ui) {
                            $(this).data('uiDraggable').originalPosition = {
                                top: 0,
                                left: 0,
                            };
                            return !evt;
                        },
                        drag: function(evt, ui) {
                            // ??
                        },
                        cursorAt: {
                            left: 30,
                            top: 30
                        }
//                        drag: function(evt, ui) {
//                            
//                            var pos = $(this).position({
//                                my: "left+1300 bottom+1300",
//                                of: evt,
//                                collision: "fit"
//                            });
//                            
//                            return pos;
//                        },
//                        refreshPositions: true
                    });
                    
                    $( ".choiceDrop" ).droppable({
                        drop: function( event, ui ) {
                            ui.draggable.data('dropped', true);
                        },
                        out: function(evt, ui) {
                            ui.draggable.data('dropped', false);
                        }
                    });
                    
                });
            })(jQuery);
        </script>
    </body>
</html>
